(function(){"use strict";function y(e){document.documentElement.classList.toggle("dark",e),localStorage.setItem("pergament-dark-mode",e?"1":"0")}const w=localStorage.getItem("pergament-dark-mode");(w==="1"||w===null&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&y(!0);const x=document.getElementById("dark-mode-toggle");x&&x.addEventListener("click",function(){y(!document.documentElement.classList.contains("dark"))});const I=document.getElementById("dark-mode-toggle-mobile");I&&I.addEventListener("click",function(){y(!document.documentElement.classList.contains("dark"))});const C=document.getElementById("mobile-menu-toggle");C&&C.addEventListener("click",function(){const e=document.getElementById("mobile-menu");e&&e.classList.toggle("hidden")}),(function(){const e=[75,87.5,100,112.5,125,137.5,150],i=2,c=document.getElementById("font-size-decrease"),o=document.getElementById("font-size-increase"),n=document.getElementById("font-size-decrease-mobile"),s=document.getElementById("font-size-increase-mobile");if(!c||!o)return;function m(){const d=localStorage.getItem("pergament-font-size");if(!d)return i;const f=parseFloat(d),u=e.indexOf(f);return u>=0?u:i}function a(d){const f=d===0,u=d===e.length-1,t=f?"You are on the smallest font size":"Decrease font size to "+e[d-1]+"%",r=u?"You are on the biggest font size":"Increase font size to "+e[d+1]+"%";c.disabled=f,c.title=t,c.classList.toggle("opacity-30",f),c.classList.toggle("cursor-not-allowed",f),o.disabled=u,o.title=r,o.classList.toggle("opacity-30",u),o.classList.toggle("cursor-not-allowed",u),n&&(n.disabled=f,n.title=t,n.classList.toggle("opacity-30",f),n.classList.toggle("cursor-not-allowed",f)),s&&(s.disabled=u,s.title=r,s.classList.toggle("opacity-30",u),s.classList.toggle("cursor-not-allowed",u))}function l(d){const f=e[d];localStorage.setItem("pergament-font-size",f);let u=document.getElementById("pergament-font-size-style");u||(u=document.createElement("style"),u.id="pergament-font-size-style",document.head.appendChild(u)),u.textContent=".prose { font-size: "+f+"%; }",a(d)}function p(){const d=m();d>0&&l(d-1)}function v(){const d=m();d<e.length-1&&l(d+1)}c.addEventListener("click",p),o.addEventListener("click",v),n&&n.addEventListener("click",p),s&&s.addEventListener("click",v),a(m())})(),(function(){const e=document.getElementById("dyslexic-toggle"),i=document.getElementById("dyslexic-toggle-mobile");if(!e)return;function c(n){const s=n?"Switch to normal font":"Switch to OpenDyslexic font";e.title=s,e.classList.toggle("pergament-active-nav",n),i&&(i.title=s,i.classList.toggle("pergament-active-nav",n))}function o(){const n=document.documentElement.classList.toggle("dyslexic");localStorage.setItem("pergament-dyslexic",n?"1":"0"),c(n)}e.addEventListener("click",o),i&&i.addEventListener("click",o),c(document.documentElement.classList.contains("dyslexic"))})(),(function(){const e=document.createElement("div");e.className="pergament-lightbox";const i=document.createElement("img");e.appendChild(i),document.body.appendChild(e);function c(n,s){i.src=n,i.alt=s||"",e.classList.add("is-open"),document.body.classList.add("lightbox-open")}function o(){e.classList.remove("is-open"),document.body.classList.remove("lightbox-open")}e.addEventListener("click",o),document.addEventListener("keydown",function(n){n.key==="Escape"&&o()}),document.querySelectorAll("main img:not(.rounded-full)").forEach(function(n){n.classList.add("pergament-zoomable"),n.addEventListener("click",function(s){s.stopPropagation(),c(n.src,n.alt)})})})(),(function(){const e='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>',i='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>';document.querySelectorAll("main pre").forEach(function(c){const o=document.createElement("button");o.className="copy-code-btn",o.setAttribute("aria-label","Copy code to clipboard"),o.innerHTML=e,o.addEventListener("click",function(){const n=c.querySelector("code"),s=n?n.innerText:c.innerText;navigator.clipboard.writeText(s).then(function(){o.innerHTML=i,setTimeout(function(){o.innerHTML=e},2e3)})}),c.appendChild(o)})})(),(function(){const e=document.getElementById("cmd-palette-backdrop"),i=document.getElementById("cmd-palette-input"),c=document.getElementById("cmd-palette-results");if(!e||!i||!c)return;const o=window.PergamentConfig&&window.PergamentConfig.searchUrl||null;if(!o)return;let n=-1,s=[],m=null;function a(){e.classList.add("is-open"),document.body.classList.add("cmd-open"),i.value="",c.innerHTML="",s=[],n=-1,setTimeout(function(){i.focus()},30)}function l(){e.classList.remove("is-open"),document.body.classList.remove("cmd-open")}function p(t){const r=c.querySelectorAll(".pergament-cmd-result");r.forEach(function(L,g){L.classList.toggle("is-active",g===t)}),n=t,t>=0&&r[t]&&r[t].scrollIntoView({block:"nearest"})}function v(){n>=0&&s[n]&&(window.location.href=s[n].url,l())}function d(t){return t==="doc"?"Doc":t==="post"?"Post":t==="page"?"Page":t.charAt(0).toUpperCase()+t.slice(1)}function f(t){if(s=t,n=-1,c.innerHTML="",t.length===0){const r=document.createElement("p");r.className="pergament-cmd-empty",r.textContent="No results found.",c.appendChild(r);return}t.forEach(function(r,L){const g=document.createElement("a");g.href=r.url,g.className="pergament-cmd-result",g.setAttribute("role","option");const k=document.createElement("span");k.className="pergament-cmd-result-badge",k.textContent=d(r.type);const E=document.createElement("div");E.className="pergament-cmd-result-body";const b=document.createElement("div");if(b.className="pergament-cmd-result-title",b.textContent=r.title,E.appendChild(b),r.excerpt){const h=document.createElement("div");h.className="pergament-cmd-result-excerpt",h.textContent=r.excerpt,E.appendChild(h)}g.appendChild(k),g.appendChild(E),g.addEventListener("mouseenter",function(){p(L)}),g.addEventListener("click",function(h){h.preventDefault(),window.location.href=r.url,l()}),c.appendChild(g)})}function u(t){if(t.length<2){c.innerHTML="",s=[];return}fetch(o+"?q="+encodeURIComponent(t),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(r){return r.json()}).then(f).catch(function(){})}i.addEventListener("input",function(){clearTimeout(m),m=setTimeout(function(){u(i.value.trim())},200)}),i.addEventListener("keydown",function(t){const r=c.querySelectorAll(".pergament-cmd-result");t.key==="ArrowDown"?(t.preventDefault(),p(Math.min(n+1,r.length-1))):t.key==="ArrowUp"?(t.preventDefault(),p(Math.max(n-1,0))):t.key==="Enter"?(t.preventDefault(),v()):t.key==="Escape"&&l()}),e.addEventListener("click",function(t){t.target===e&&l()}),document.addEventListener("keydown",function(t){(t.metaKey||t.ctrlKey)&&t.key==="k"&&(t.preventDefault(),e.classList.contains("is-open")?l():a())}),document.querySelectorAll('input[name="q"]').forEach(function(t){t.addEventListener("mousedown",function(r){r.preventDefault(),a()}),t.addEventListener("focus",function(){t.blur(),a()})})})(),(function(){if(!("serviceWorker"in navigator))return;const e=window.PergamentConfig&&window.PergamentConfig.swUrl;e&&navigator.serviceWorker.register(e)})(),(function(){const e=document.getElementById("docs-sidebar-toggle");e&&e.addEventListener("click",function(){const i=document.getElementById("docs-sidebar");i&&i.classList.toggle("hidden")})})(),(function(){const e=Array.from(document.querySelectorAll("[data-toc-link]"));if(!e.length)return;const i=Array.from(document.querySelectorAll(".prose h2[id], .prose h3[id], .prose h4[id]"));if(!i.length)return;const c=new Set;function o(m){e.forEach(function(a){const l=a.dataset.tocLink===m;a.classList.toggle("toc-link-active",l),l&&a.scrollIntoView({block:"nearest"})})}function n(){for(let l=0;l<i.length;l++)if(c.has(i[l].id)){o(i[l].id);return}var m=window.scrollY+100,a=null;i.forEach(function(l){l.offsetTop<=m&&(a=l.id)}),a&&o(a)}const s=new IntersectionObserver(function(m){m.forEach(function(a){a.isIntersecting?c.add(a.target.id):c.delete(a.target.id)}),n()},{rootMargin:"-80px 0px -40% 0px",threshold:0});i.forEach(function(m){s.observe(m)})})(),(function(){const e='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M13 4v16M17 4v16M19 4H9.5a4.5 4.5 0 0 0 0 9H13"/></svg>',i='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>';document.querySelectorAll(".prose h2[id], .prose h3[id], .prose h4[id]").forEach(function(c){const o=document.createElement("button");o.className="heading-anchor",o.setAttribute("aria-label","Copy link to section"),o.innerHTML=e,o.addEventListener("click",function(n){n.stopPropagation();const s=window.location.origin+window.location.pathname+"#"+c.id;navigator.clipboard.writeText(s).then(function(){o.innerHTML=i,setTimeout(function(){o.innerHTML=e},2e3)})}),c.appendChild(o)})})()})();
