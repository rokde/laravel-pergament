(function(){"use strict";function b(t){document.documentElement.classList.toggle("dark",t),localStorage.setItem("pergament-dark-mode",t?"1":"0")}const I=localStorage.getItem("pergament-dark-mode");(I==="1"||I===null&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&b(!0);const C=document.getElementById("dark-mode-toggle");C&&C.addEventListener("click",function(){b(!document.documentElement.classList.contains("dark"))});const S=document.getElementById("dark-mode-toggle-mobile");S&&S.addEventListener("click",function(){b(!document.documentElement.classList.contains("dark"))});const M=document.getElementById("mobile-menu-toggle");M&&M.addEventListener("click",function(){const t=document.getElementById("mobile-menu");t&&t.classList.toggle("hidden")}),(function(){const t=[75,87.5,100,112.5,125,137.5,150],o=2,i=document.getElementById("font-size-decrease"),n=document.getElementById("font-size-increase"),c=document.getElementById("font-size-decrease-mobile"),s=document.getElementById("font-size-increase-mobile");if(!i||!n)return;function d(){const l=localStorage.getItem("pergament-font-size");if(!l)return o;const f=parseFloat(l),a=t.indexOf(f);return a>=0?a:o}function u(l){const f=l===0,a=l===t.length-1,v=f?"You are on the smallest font size":"Decrease font size to "+t[l-1]+"%",E=a?"You are on the biggest font size":"Increase font size to "+t[l+1]+"%";i.disabled=f,i.title=v,i.classList.toggle("opacity-30",f),i.classList.toggle("cursor-not-allowed",f),n.disabled=a,n.title=E,n.classList.toggle("opacity-30",a),n.classList.toggle("cursor-not-allowed",a),c&&(c.disabled=f,c.title=v,c.classList.toggle("opacity-30",f),c.classList.toggle("cursor-not-allowed",f)),s&&(s.disabled=a,s.title=E,s.classList.toggle("opacity-30",a),s.classList.toggle("cursor-not-allowed",a))}function m(l){const f=t[l];localStorage.setItem("pergament-font-size",f);let a=document.getElementById("pergament-font-size-style");a||(a=document.createElement("style"),a.id="pergament-font-size-style",document.head.appendChild(a)),a.textContent=".prose { font-size: "+f+"%; }",u(l)}function h(){const l=d();l>0&&m(l-1)}function p(){const l=d();l<t.length-1&&m(l+1)}i.addEventListener("click",h),n.addEventListener("click",p),c&&c.addEventListener("click",h),s&&s.addEventListener("click",p),u(d())})(),(function(){const t=document.getElementById("dyslexic-toggle"),o=document.getElementById("dyslexic-toggle-mobile");if(!t)return;function i(c){const s=c?"Switch to normal font":"Switch to OpenDyslexic font";t.title=s,t.classList.toggle("pergament-active-nav",c),o&&(o.title=s,o.classList.toggle("pergament-active-nav",c))}function n(){const c=document.documentElement.classList.toggle("dyslexic");localStorage.setItem("pergament-dyslexic",c?"1":"0"),i(c)}t.addEventListener("click",n),o&&o.addEventListener("click",n),i(document.documentElement.classList.contains("dyslexic"))})(),(function(){const t=document.createElement("div");t.className="pergament-lightbox";const o=document.createElement("img");t.appendChild(o),document.body.appendChild(t);function i(c,s){o.src=c,o.alt=s||"",t.classList.add("is-open"),document.body.classList.add("lightbox-open")}function n(){t.classList.remove("is-open"),document.body.classList.remove("lightbox-open")}t.addEventListener("click",n),document.addEventListener("keydown",function(c){c.key==="Escape"&&n()}),document.querySelectorAll("main img:not(.rounded-full)").forEach(function(c){c.classList.add("pergament-zoomable"),c.addEventListener("click",function(s){s.stopPropagation(),i(c.src,c.alt)})})})(),(function(){const t='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>',o='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>';document.querySelectorAll("main pre").forEach(function(i){const n=document.createElement("button");n.className="copy-code-btn",n.setAttribute("aria-label","Copy code to clipboard"),n.innerHTML=t,n.addEventListener("click",function(){const c=i.querySelector("code"),s=c?c.innerText:i.innerText;navigator.clipboard.writeText(s).then(function(){n.innerHTML=o,setTimeout(function(){n.innerHTML=t},2e3)})}),i.appendChild(n)})})(),(function(){const t=document.getElementById("cmd-palette-backdrop"),o=document.getElementById("cmd-palette-input"),i=document.getElementById("cmd-palette-results");if(!t||!o||!i)return;const n=window.PergamentConfig&&window.PergamentConfig.searchUrl||null;if(!n)return;const c=[{title:"Toggle dark mode",excerpt:"Switch between light and dark theme",type:"cmd",action:"dark-mode"},{title:"Increase font size",excerpt:"Make text larger",type:"cmd",action:"font-size-increase"},{title:"Decrease font size",excerpt:"Make text smaller",type:"cmd",action:"font-size-decrease"},{title:"Toggle dyslexic font",excerpt:"Switch to OpenDyslexic font",type:"cmd",action:"dyslexic"}];let s=-1,d=[],u=null;function m(e){const r=e==="dark-mode"?"dark-mode-toggle":e==="font-size-increase"?"font-size-increase":e==="font-size-decrease"?"font-size-decrease":e==="dyslexic"?"dyslexic-toggle":null;if(r){const y=document.getElementById(r);y&&y.click()}}function h(){t.classList.add("is-open"),document.body.classList.add("cmd-open"),o.value="",d=[],s=-1,setTimeout(function(){o.focus()},30),E()}function p(){t.classList.remove("is-open"),document.body.classList.remove("cmd-open")}function l(e){const r=i.querySelectorAll(".pergament-cmd-result");r.forEach(function(y,g){y.classList.toggle("is-active",g===e)}),s=e,e>=0&&r[e]&&r[e].scrollIntoView({block:"nearest"})}function f(){if(s>=0&&d[s]){const e=d[s];e.type==="cmd"?m(e.action):window.location.href=e.url,p()}}function a(e){return e==="doc"?"Doc":e==="post"?"Post":e==="page"?"Page":e==="cmd"?"Cmd":e.charAt(0).toUpperCase()+e.slice(1)}function v(e){if(d=e,s=-1,i.innerHTML="",e.length===0){const r=document.createElement("p");r.className="pergament-cmd-empty",r.textContent="No results found.",i.appendChild(r);return}e.forEach(function(r,y){const g=document.createElement("a");g.href=r.type==="cmd"?"#":r.url,g.className="pergament-cmd-result",g.setAttribute("role","option");const w=document.createElement("span");w.className="pergament-cmd-result-badge pergament-cmd-result-badge--"+r.type,w.textContent=a(r.type);const L=document.createElement("div");L.className="pergament-cmd-result-body";const x=document.createElement("div");if(x.className="pergament-cmd-result-title",x.textContent=r.title,L.appendChild(x),r.excerpt){const k=document.createElement("div");k.className="pergament-cmd-result-excerpt",k.textContent=r.excerpt,L.appendChild(k)}g.appendChild(w),g.appendChild(L),g.addEventListener("mouseenter",function(){l(y)}),g.addEventListener("click",function(k){k.preventDefault(),r.type==="cmd"?m(r.action):window.location.href=r.url,p()}),i.appendChild(g)})}function E(){fetch(n+"?q=",{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(e){return e.json()}).then(function(e){v(e.concat(c))}).catch(function(){v(c)})}function T(e){if(e.length===0){E();return}if(e.length<2){i.innerHTML="",d=[];return}fetch(n+"?q="+encodeURIComponent(e),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(r){return r.json()}).then(v).catch(function(){})}o.addEventListener("input",function(){clearTimeout(u),u=setTimeout(function(){T(o.value.trim())},200)}),o.addEventListener("keydown",function(e){const r=i.querySelectorAll(".pergament-cmd-result");e.key==="ArrowDown"?(e.preventDefault(),l(Math.min(s+1,r.length-1))):e.key==="ArrowUp"?(e.preventDefault(),l(Math.max(s-1,0))):e.key==="Enter"?(e.preventDefault(),f()):e.key==="Escape"&&p()}),t.addEventListener("click",function(e){e.target===t&&p()}),document.addEventListener("keydown",function(e){(e.metaKey||e.ctrlKey)&&e.key==="k"&&(e.preventDefault(),t.classList.contains("is-open")?p():h())}),document.querySelectorAll('input[name="q"]').forEach(function(e){e.addEventListener("mousedown",function(r){r.preventDefault(),h()}),e.addEventListener("focus",function(){e.blur(),h()})})})(),(function(){if(!("serviceWorker"in navigator))return;const t=window.PergamentConfig&&window.PergamentConfig.swUrl;t&&navigator.serviceWorker.register(t)})(),(function(){const t=document.getElementById("docs-sidebar-toggle");t&&t.addEventListener("click",function(){const o=document.getElementById("docs-sidebar");o&&o.classList.toggle("hidden")})})(),(function(){const t=Array.from(document.querySelectorAll("[data-toc-link]"));if(!t.length)return;const o=Array.from(document.querySelectorAll(".prose h2[id], .prose h3[id], .prose h4[id]"));if(!o.length)return;const i=new Set;function n(d){t.forEach(function(u){const m=u.dataset.tocLink===d;u.classList.toggle("toc-link-active",m),m&&u.scrollIntoView({block:"nearest"})})}function c(){for(let m=0;m<o.length;m++)if(i.has(o[m].id)){n(o[m].id);return}var d=window.scrollY+100,u=null;o.forEach(function(m){m.offsetTop<=d&&(u=m.id)}),u&&n(u)}const s=new IntersectionObserver(function(d){d.forEach(function(u){u.isIntersecting?i.add(u.target.id):i.delete(u.target.id)}),c()},{rootMargin:"-80px 0px -40% 0px",threshold:0});o.forEach(function(d){s.observe(d)})})(),(function(){const t='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M13 4v16M17 4v16M19 4H9.5a4.5 4.5 0 0 0 0 9H13"/></svg>',o='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>';document.querySelectorAll(".prose h2[id], .prose h3[id], .prose h4[id]").forEach(function(i){const n=document.createElement("button");n.className="heading-anchor",n.setAttribute("aria-label","Copy link to section"),n.innerHTML=t,n.addEventListener("click",function(c){c.stopPropagation();const s=window.location.origin+window.location.pathname+"#"+i.id;navigator.clipboard.writeText(s).then(function(){n.innerHTML=o,setTimeout(function(){n.innerHTML=t},2e3)})}),i.appendChild(n)})})()})();
